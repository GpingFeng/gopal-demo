<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JavaScript 中 map 方法内异步方法无法同步执行问题 </title>
</head>

<body>
  <script type="text/javascript">
(async () => {
  let arr = [1, 2, 3, 4, 5]
  // let res = await Promise.all(arr.map(async (item) => {
  //   console.log(item + '执行')
  //   // map并发执行
  //   await new Promise(resolve => {
  //     setTimeout(() => {
  //       console.log(item + '结束');
  //       resolve(item + '结束');
  //     }, 1000)
  //   })
  //   return 10;
  // }))
  // console.log(res)

      let res = []
      for (let i = 0; i < arr.length; i++) {
        item = arr[i];
        console.log(item + '执行')
        // map并发执行
        await new Promise(resolve => {
          setTimeout(() => {
            console.log(item + '结束');
            resolve(item + '结束');
          }, 1000)
        })
        res.push(10);
      }
      console.log(res)
    })()
    
  </script>
</body>

</html>